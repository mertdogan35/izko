

<div id="data-container"
     data-yirmiiki-profit="0,925"
     data-yirmiiki-number="230"
     data-ondort-profit="0,8"
     data-ondort-number="0"
     data-onsekiz-profit="0,85"
     data-onsekiz-number="0"
     data-gram-profit="0,925"
     data-gram-number="230"
     data-yeniceyrek-profit="1,65"
     data-yeniceyrek-number="280"
     data-eskiceyrek-profit="1,65"
     data-eskiceyrek-number="270"
     data-ata-profit="6,7"
     data-ata-number="800">
</div>


    <div style="color: #444444 ; font-family:Arial">
    <div style="margin-bottom: 20px; position: relative; border-radius: 3px">
        <div style="
              height: 40px;
              display: block !important;
              position: relative;
              border: 2px solid #bfbfbf;
              padding: 0 16px;
              border-radius: 3px 3px 0 0;
              background-color: #eaebeb;
            ">
            <span class="da-panel-title"
                  style="
                text-align: center;
                padding-top: 10px;
                font-size: 15px;
                display: block;
                line-height: 20px;
                padding: 16px 0;
                margin-right: 32px;
              ">
                <div style="
                  color: #ff0000;
                  text-align: center;
                  font-size: 25px;
                  margin-right: 50px;
                  color: #ff0000;
                  font-weight: 950;
                ">
                    İzmir Kuyumcular Odası Tavsiye Edilen Fiyatlardır.
                </div>
            </span>
        </div>
        <div class="da-panel-content da-form-container"
             style="
              font-size: 34px;
              width: 99.7%;
              background-color: white;
              background-repeat: repeat-x;
              background-position: left top;

            ">
            <form class="da-form" method="post">
                <table id="da-ex-datatable-numberpaging"
                       class="da-table dataTable"
                       aria-describedby="da-ex-datatable-numberpaging_info"
                       style="
                  width: 100%;
                  margin: 0;
                  clear: both;
                  background-color: #ffff00;
                    border:2px solid #000;
                  border-spacing: 0;
                ">
                    <thead>
                        <tr role="row">
                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="da-ex-datatable-numberpaging"
                                rowspan="1"
                                colspan="1"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;
                         font-size: 48px;
                        padding: 6px 20px;
                        /* border-top: 2px solid #000000 !important; */
                        border-bottom: 2px solid #000000 !important;
                        border-right: 2px solid #000000 !important;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                ALTIN
                            </th>

                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="da-ex-datatable-numberpaging"
                                rowspan="1"
                                colspan="1"
                                aria-label="Platform(s): activate to sort column ascending"
                                style="
                        width: 45%;
                        font-weight: bold;
                        text-align: center;
                        /* border-top: 2px solid #000000 !important; */
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                         font-size: 48px;
                      ">
                                SATIŞ
                            </th>

                            <th colspan="2" style="width: 35%; font-weight: bold; text-align: center ;font-size: 48px;">
                                HOŞGELDİNİZ
                            </th>
                        </tr>
                    </thead>

                    <tbody role="alert" aria-live="polite" aria-relevant="all" style="font-weight: 900">
                        <tr class="even">
                            <td class=""
                                style="
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      ">
                                22 Ayar
                            </td>
                            <!-- <td id="row2_alis" class="sorting_1" style="font-size: 42px">00,00</td> -->
                            <td id="row2_satis"
                                class="sorting_1"
                                style="
                       font-size: 48px;
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        color: #ff0b00;

                      ">
                                <div id="yirmiikiLabel"></div><i class="fa fa-try" aria-hidden="true"></i>
                            </td>
                            <td style="color: #000000; background: #ffffff" rowspan="7" colspan="5">
                                <div style="font-size: 16px; text-align: justify; height: 250px">

                                    <br />
                                    <div style="font-weight: normal; margin-right: 10px; font-size: 24px">
                                        <table width="100%"
                                               style="border: 2px solid white; text-align: center"
                                               bgcolor="#FFFFFF">
                                            <tbody>
                                                <tr bgcolor="#FFFFFF" style="border: 0px  ; font-size: 32px;">
                                                    <td><b>İZMİR KUYUMCULAR ODASI</b></td>
                                                    <td rowspan="2">
                                                        <img src="https://www.ikd.sadearge.com/Firma/images/izko_logo.jpg" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="font-weight: 900 ; font-size: 32px;">TAVSİYE EDİLEN FİYATLARDIR!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr class="odd" style="">
                            <td class=""
                                style="
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        text-align: center;
font-size: 48px;
                      ">
                                18 Ayar
                            </td>
                            <!-- <td id="row3_alis" class="sorting_1" style="font-size: 42px">00,00</td> -->
                            <td id="row3_satis"
                                class="sorting_1"
                                style="
                        font-size: 48px;
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        color: #ff0b00;
                      ">
                                <div id="onsekizLabel"></div><i class="fa fa-try" aria-hidden="true"></i>
                            </td>
                        </tr>
                        <tr class="even">
                            <td class=""
                                style="
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        text-align: center;
font-size: 48px;
                      ">
                                14 Ayar
                            </td>
                            <!-- <td id="row4_alis" class="sorting_1" style="font-size: 42px">00,00</td> -->
                            <td id="row4_satis"
                                class="sorting_1"
                                style="
                        font-size: 48px;
                        text-align: center;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        color: #ff0b00;
                      ">
                                <div id="ondortLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </td>
                        </tr>

                        <tr class="even">
                            <td class=""
                                style="
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        text-align: center;
font-size: 48px;
                      ">
                                Gram Altın
                            </td>
                            <!-- <td id="row6_alis" class="sorting_1" style="font-size: 42px">00,00</td> -->
                            <td id="row6_satis"
                                class="sorting_1"
                                style="
                        font-size: 48px;
                        text-align: center;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                        color: #ff0b00;
                      ">
                                <div id="gramLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </td>
                        </tr>
                        <tr class="odd">
                            <td class=""
                                style="border-right: 2px solid #000000 !important ; text-align: center ; font-size: 48px;">
                                Cumhuriyet
                            </td>
                            <!-- <td id="row7_alis" class="sorting_1" style="font-size: 42px">00,00</td> -->
                            <td id="row7_satis"
                                class="sorting_1"
                                style="
                        font-size: 48px;
                        text-align: center;
                        border-right: 2px solid #000000 !important;
                        color: #ff0b00;
                      ">
                                <div id="ataLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </td>
                        </tr>
                    </tbody>
                    <thead>
                        <tr style="width: 100%">
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;

                        border-top: 2px solid #000000 !important;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
                      "
                                aria-label="Rendering engine: activate to sort column ascending"></th>
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;

                        border-top: 2px solid #000000 !important;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                YENİ
                            </th>

                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                style="
                        font-weight: bold;
                        text-align: center;

                        border-top: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      ">
                                ESKİ
                            </th>
                        </tr>
                        <tr style="width: 100%">
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                Çeyrek
                            </th>
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;
                        color: #ff0b00;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                <div id="yeniceyrekLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>

                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                style="
                        font-weight: bold;
                        text-align: center;
                        color: #ff0b00;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      ">
                                <div id="eskiceyrekLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>
                        </tr>
                        <tr style="width: 100%">
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                Yarım
                            </th>
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;
                        color: #ff0b00;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                <div id="yeniyarimLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>

                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                style="
                        font-weight: bold;
                        text-align: center;
                        color: #ff0b00;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      ">
                                <div id="eskiyarimLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>
                        </tr>
                        <tr style="width: 100%">
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;

                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                Ziynet
                            </th>
                            <th class="sorting"
                                role="columnheader"
                                style="
                        font-weight: bold;
                        text-align: left;
                        text-align: center;
                        color: #ff0b00;
                        border-right: 2px solid #000000 !important;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      "
                                aria-label="Rendering engine: activate to sort column ascending">
                                <div id="yenitamLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>

                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                style="
                        font-weight: bold;
                        text-align: center;
                        color: #ff0b00;
                        border-bottom: 2px solid #000000 !important;
font-size: 48px;
                      ">
                                <div id="eskitamLabel"></div> <i class="fa fa-try" aria-hidden="true"></i>
                            </th>

                        </tr>
                        <tr style="width: 100%">
                            <th class="sorting"
                                role="columnheader"
                                style="font-weight: bold; text-align: center; border-right: 2px solid #000000 !important; font-size: 48px;"
                                aria-label="Rendering engine: activate to sort column ascending">
                                Has Altın:

                            </th>
                            <th class="sorting"
                                role="columnheader"
                                style="font-weight: bold; text-align: right ; font-size: 48px;"
                                aria-label="Rendering engine: activate to sort column ascending">
                               
                                <div id="demo" style="display: flex; justify-content: right; align-items: right; height: 100%;">
                                </div> <i class="fa fa-try" aria-hidden="true" style="color: #ff0b00; "></i>
                            </th>
                            <th class="sorting"
                                role="columnheader"
                                style="font-weight: bold; text-align: center; font-size: 48px;"
                                aria-label="Rendering engine: activate to sort column ascending">
                               
                                
                            </th>
                        </tr>
                    </thead>

                    
                </table>
                <table id="da-ex-datatable-numberpaging" class="da-table dataTable" aria-describedby="da-ex-datatable-numberpaging_info" style="width:100%; padding:10px; background-color:#eaebeb; border:2px solid #000">
                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                        <tr style="text-align:center">

                            <td style="font-weight:bold;font-size:25px; border-right: 2px solid #000000 !important; ">
                                <div id="clock"></div>
                            </td>
                            <td style="font-weight:bold;font-size:25px; border-right: 2px solid #000000 !important;">ONS: <font id="ons" color="red">3494,6</font></td>
                            <td style="font-weight:bold;font-size:25px; border-right: 2px solid #000000 !important;">Dolar: <font id="dolar" color="red">38,297</font></td>
                            <td style="font-weight:bold;font-size:25px;">Euro: <font id="euro" color="red">44,128</font></td>



                        </tr>
                    </tbody>
                </table>

            <input name="__RequestVerificationToken" type="hidden" value="CfDJ8GxBrbv_lN1Hvw0BCX0hKVulsnqIzYONJIuVkChr3IBkVyp4ecicehRDSR4py_bD5uVzKcFJt11NjMaiGQO7Q7CCwMOJ4RpEiE_tXx4Bi2jxYVarZilLKQbibliQeRi3HzgjPO5QbSlfx5KVztsyyMA" /></form>
        </div>
    </div>
    </div>



<script>
    function updateClockAndDate() {
        var now = new Date();
        var hours = now.getHours();
        var minutes = now.getMinutes();
        var seconds = now.getSeconds();

        // Pad single digit minutes and seconds with a leading zero
        minutes = (minutes < 10 ? "0" : "") + minutes;
        seconds = (seconds < 10 ? "0" : "") + seconds;

        // Get date information
        var day = now.getDate();
        var month = now.getMonth() + 1;  // JavaScript months are 0-based, so we add 1
        var year = now.getFullYear();

        // Pad single digit day and month with a leading zero
        day = (day < 10 ? "0" : "") + day;
        month = (month < 10 ? "0" : "") + month;

        // Display the clock and date
        var clockText = hours + ":" + minutes + ":" + seconds;
        var dateText = day + "." + month + "." + year;
        document.getElementById("clock").innerHTML = clockText + " | " + dateText;
    }

    updateClockAndDate();  // initial call to display clock and date
    setInterval(updateClockAndDate, 1000);  // update clock and date every second
</script>


<script>
    var haremAltin = {
        wss: 'wss://socket.haremaltin.com/socket.io/?EIO=4&transport=websocket',
        saleRate: 1,
        buyRate: 1,
        fixPrice: 0,
        selector: '',
        currencies: [],
        _webSocket: null,
        _setInterval: null,
        _init: function (settings) {
            this.selector = settings.selector;
            this.currencies = settings.currencies;
            this.saleRate = settings.saleRate;
            this.buyRate = settings.buyRate;
            this.fixPrice = settings.fixPrice;
            this._createCss();
            this._createTable();
            this._connect();
        },
        _connect: function () {
            this._webSocket = new WebSocket(this.wss, "protocolOne");
            this._webSocket.onopen = (event) => {
                this._webSocket.send("40");
            };
            this._webSocket.onclose = (event) => {
                console.log("Closing");
                this._connect();
            };
            this._webSocket.onmessage = (event) => {
                let jss = event.data.split('[');
                let responseCode = jss.shift();
                if (responseCode == '42' && jss.length) {
                    jss.concat('[');
                    const response = JSON.parse('[' + jss, 1);
                    for (var key in response[1].data) {
                        let currency = response[1].data[key];
                        this._calculateRow(currency);
                    }
                }
            };
        },
        _createTable: function () {
            let table = '<table>';
            table += this._templateHead();
            for (let i = 0; i < this.currencies.length; i++) {
                let currency = this.currencies[i];
                table += this._templateRow(currency);
            }
            table += '</table>';
            let el = document.getElementById(this.selector);
            if (el) {
                el.innerHTML = table;
            }
        },
        _calculateRow: function (currency) {
            let row = document.getElementsByClassName('currency-' + currency.code);
            if (row.length) {
                let yuzde = this._percentage(currency);
                let alis = this._calculateBuying(currency);
                let satis = this._calculateSelling(currency);
                let yon = this._side(yuzde);
                row[0].innerHTML = `<td class="satis"  style="text-align:right; font-size:48px; font-weight:bold">${satis}</td>`;
                row[0].classList.remove("blink-up");
                row[0].classList.remove("blink-down");
                let blink = this._blink(currency);
                if (blink) {
                    this._sleep(500).then(() => {
                        row[0].classList.add(blink);
                    });
                }

                function roundToNearestMultiple(number, multiple) {
                    return Math.ceil(number / multiple) * multiple;
                }

                if (currency.code === 'ALTIN') {
                    const dataContainer = document.getElementById("data-container");

                    const altin = parseFloat(satis);
                    console.log(altin);

                    function customParseFloat(value) {
                        return parseFloat(value.replace(',', '.'));
                    }
                    // Hesaplama fonksiyonu
                    function calculatePrice(profit, number, altin) {
                        let result = ((altin * profit) + number);
                        return Math.ceil(result / 10) * 10;
                    }

                    const types = ['yirmiiki', 'ondort', 'onsekiz', 'gram', 'yeniceyrek', 'eskiceyrek', 'ata'];

                    const calculatedPrices = {};
                    console.log(dataContainer.dataset[`ataProfit`]);
                    types.forEach(type => {
                        const profit = customParseFloat(dataContainer.dataset[`${type}Profit`]);
                        const number = customParseFloat(dataContainer.dataset[`${type}Number`]);
                        console.log(profit, number);
                        calculatedPrices[type] = calculatePrice(profit, number, altin);
                    });

                    // Diğer hesaplamalar (Yarımlar ve Tam'lar)
                    calculatedPrices['yeniyarim'] = Math.ceil((calculatedPrices['yeniceyrek'] * 2) / 10) * 10;
                    calculatedPrices['eskiyarim'] = Math.ceil((calculatedPrices['eskiceyrek'] * 2) / 10) * 10;
                    calculatedPrices['yenitam'] = Math.ceil((calculatedPrices['yeniceyrek'] * 4) / 10) * 10;
                    calculatedPrices['eskitam'] = Math.ceil((calculatedPrices['eskiceyrek'] * 4) / 10) * 10;

                    // Sonuçları konsola yazdırma
                    console.log(calculatedPrices);
                    //
                    document.getElementById('yirmiikiLabel').textContent = `${roundToNearestMultiple(calculatedPrices['yirmiiki'], 10)}`;
                    document.getElementById('ondortLabel').textContent = `${roundToNearestMultiple(calculatedPrices['ondort'], 10)}`;
                    document.getElementById('onsekizLabel').textContent = `${roundToNearestMultiple(calculatedPrices['onsekiz'], 10)}`;
                    document.getElementById('gramLabel').textContent = `${roundToNearestMultiple(calculatedPrices['gram'], 10)}`;
                    document.getElementById('yeniceyrekLabel').textContent = `${roundToNearestMultiple(calculatedPrices['yeniceyrek'], 10)}`;
                    document.getElementById('eskiceyrekLabel').textContent = `${roundToNearestMultiple(calculatedPrices['eskiceyrek'], 10)}`;
                    document.getElementById('yeniyarimLabel').textContent = `${roundToNearestMultiple(calculatedPrices['yeniyarim'], 10)}`;
                    document.getElementById('eskiyarimLabel').textContent = `${roundToNearestMultiple(calculatedPrices['eskiyarim'], 10)}`;
                    document.getElementById('yenitamLabel').textContent = `${roundToNearestMultiple(calculatedPrices['yenitam'], 10)}`;
                    document.getElementById('eskitamLabel').textContent = `${roundToNearestMultiple(calculatedPrices['eskitam'], 10)}`;
                    document.getElementById('ataLabel').textContent = `${roundToNearestMultiple(calculatedPrices['ata'], 10)}`;

                }


            }
        },
        _sleep: function (ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        },
        _templateHead: function () {
            return ``
        },
        _templateRow: function (currency) {
            return `<tr class="currencies currency-${currency}"><td class="kod">${currency}</td><td class="satis"><i class="fa fa-try" aria-hidden="true"></i></td></tr>`
        },
        _calculateSelling(currency) {
            return (currency.satis * this.saleRate).toFixed(2);
        },
        _calculateBuying(currency) {
            return (currency.alis * this.buyRate).toFixed(2);
        },
        _percentage(currency) {
            return (((currency.satis - currency.kapanis) / currency.satis) * 100).toFixed(2);
        },
        _side(percentage) {
            let side = '';
            if (percentage > 0) {
                side = '<svg transform="rotate(270)" style="fill: green;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z"/></svg>'
            } else if (percentage < 0) {
                side = '<svg transform="rotate(90)" style="fill: red;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z"/></svg>'
            }
            return side;
        },
        _blink(currency) {
            let blink = '';
            if (currency.dir.satis_dir == 'up') {
                blink = 'blink-up';
            } else if (currency.dir.satis_dir == 'down') {
                blink = 'blink-down';
            }
            return blink;
        },
        _createCss() {
            var css = '    .blink-up{\n' +
                '        background-color: #000000; color:#ffffff;\n' +
                '        animation: blinkingUpText 1s ;\n' +
                '    }\n' +
                '    @keyframes blinkingUpText{\n' +
                '        0%   { background-color: #000000; color:#ffffff;}\n' +
                '        100% { background-color: #000000; color:#ffffff;}\n' +
                '    }\n' +
                '    .blink-down{\n' +
                '        background-color: #ff0000; color:#ffffff;\n' +
                '        animation: blinkingDownText 1s ;\n' +
                '    }\n' +
                '    @keyframes blinkingDownText{\n' +
                '        0%   { background-color: #ff0000; color:#ffffff;}\n' +
                '        100% { background-color: #ff0000; color:#ffffff;}\n' +
                '    }',
                head = document.head || document.getElementsByTagName('head')[0],
                style = document.createElement('style');
            head.appendChild(style);
            style.appendChild(document.createTextNode(css));
        }


    }

</script>
<script>
    let settings = {
        selector: 'demo',
        currencies: ['ALTIN'],
        saleRate: 1,
        buyRate: 1,
        fixPrice: 0
    }
    haremAltin._init(settings);
</script>